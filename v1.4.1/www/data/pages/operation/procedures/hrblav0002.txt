====== Temperatura Blade ======

===== Datos Generales =====


|< 50% >|
^  Código      ^  Nombre Procedimiento  ^  Verificado                  ^  Operativo     ^  Fecha Creación  ^  Fecha Ultima Modificación  ^  Versión  ^
|  HRBLAV0002  |  Temperatura Blade     |  @#EAFFD5: SI  |  @#EAFFD5: SI  |  17/09/2015      |  06/04/2016                 |  0.5      |

  * ** <fc red> IMPORTANTE: </fc> INFORMACION DEL ENTORNO : ** {{popup>:documentation:cyclops:architecture?[keepOpen]|AEMET: HPC Architecture and Risk Definitions}}

===== Sistemas Objetivo =====

|< 100% 10% 10% 32% 8% 30% >| 
^  Grupo         ^  Nodos                    ^  Descripción         ^  Criticidad            ^  Implicación                                                 ^
|  compute       |  nimbus[3-5][1-3][01-18]  |  @#FAAC58: Solo valido para los nodos Refrigerados por Agua                  |  @#EAFFD5: BAJA        |  Perdida de capacidad de computo para el entorno productivo  |

===== Sistemas Colaterales =====

|< 100% 10% 10% 32% 8% 30% >|
^  Grupo         ^  Nodos          ^  Descripción                                                     ^  Criticidad  ^  Implicación  ^ 
|  Todos         |  Todos          |                                                                  |  @#EAFFD5: BAJA        |  Ninguna Conocida  |


===== Procedimiento =====

==== Notificación Inicial ====


  - Notificar la incidencia:
    * SI SOY: Valencia -> [[:operation:procedures:ADBVXX0001|ADBVXX0001 : Notificación BULL - Valencia ]]
    * SI SOY: AEMET ->    [[:operation:procedures:ADAEXX0002|ADAEXX0002 : AEMET Notificatión ]]
    * SI NO SOY NINGUNO DE LOS ANTERIORES -> [[:operation:procedures:ADBAXX0001| ADBAXX0001 : Notificación BULL - AEMET ]]

==== Alcance ====

  * ** Este procedimiento solo se ejecutara por los siguientes actores en las siguientes circunstancias: **

|< 50% >|
^  ACTOR          ^  EJECUCION                   ^  HORARIO EJECUCION                                                                     ^
|  AEMET          |  @#FA5858:<fc white>NO</fc>  |  @#FAAC58: SOLO NOTIFICACIÓN INICIAL                                                   |
|  BULL VALENCIA  |  @#EAFFD5:SI                 |  @#FFFF00: EXCLUIR HORARIO BULL AEMET  ( L-J 08:00-17:30 y V 08:00-14:00 HORA LOCAL )  |
|  BULL AEMET     |  @#EAFFD5:SI                 |  @#EAFFD5:L-J 08:00-17:30 y V 08:00-14:00 HORA LOCAL                                   |
|  BULL MADRID    |  @#EAFFD5:SI                 |  @#FFFF00: INTERVENCION SOLICITADA                                                     |

==== Ejecución ====
 
<box orange> La alerta debería producirse sobre dos nodos, ya que cada blade se compone de dos nodos. </box>

  - Conectarse externamente a un nodo de gestión: [[operation:procedures:SPXXXX0002|SPXXXX0002 : Conexión SSH al Sistema]]
    - En caso de no poder conectarse: [[operation:procedures:SPXXXX0004|SPXXXX0004 : Perdida de Conexión con la monitorización]]
  - Conectarse internamente al nodo afectado: [[operation:procedures:SPXXXX0002|SPXXXX0002 : Conexión SSH al Sistema]]
      - Poner el nodo en la monitorización en modo ** diagnose ** [[operation:procedures:SFCYBS0002|SFCYBS0002 : Cambiar el estado de los Nodos en Cyclops]]
      - Cambiar al estado del nodo Drain en Slurm.[[operation:procedures:SFSLBS0004|SFSLBS0004 : Cambiar estado nodo en Slurm]] 
      - Mantener atención sobre el estado de ese nodo, ** <fc orange> revisar cada 5~15 minutos máximo. </fc> ** 
        - Si aumentan volver a verificar el estado del entorno productivo [[operation:procedures:SFCYAV0001|SFCYAV0001 : Comprobar Entorno Productivo]]
        - Si pasado un tiempo de ** <fc orange> 30~60 minutos </fc> ** el sensor no indica un exceso de temperatura en el nodo afectado:
          - Cambiar de nuevo el estado del nodo de computo a ** idle ** : [[operation:procedures:SFSLBS0004|SFSLBS0004 : Cambiar estado nodo en Slurm]]
          - Y volver a poner el nodo en UP en la monitorización. [[operation:procedures:SFCYBS0002|SFCYBS0002 : Cambiar el estado de los Nodos en Cyclops]]
        - Si pasado el tiempo indicado en el punto anterior sigue existiendo un problema de temperatura:
          - Poner el nodo en CONTENT en la monitorización. [[operation:procedures:SFCYBS0002|SFCYBS0002 : Cambiar el estado de los Nodos en Cyclops]]
          - Apagar el nodo según la opción A, si no, usar la opción C: [[operation:procedures:HRBLBS0003|HRBLBS0003 : Apagado Nodo]] 
==== Notificación Final ====

  - Notificar la incidencia:
    * SI SOY Valencia -> [[:operation:procedures:ADBVXX0001|ADBVXX0001 : Notificación BULL - Valencia ]]
  - FINAL
 