====== Inicialización Lustre ======

===== Datos Generales =====


|< 50% >|
^  Código       ^  Nombre Procedimiento  ^  Verificado    ^  Operativo    ^  Fecha Creación   ^  Fecha Ultima Modificación  ^  Versión  ^
|  FSLUAV0002   |  Inicializacion Lustre   |  @#FA5858:NO   |  @#EAFFD5:SI  |  27/07/2015       |  29/09/2015                 |    0.4    | 


  * ** <fc red> IMPORTANTE: </fc> INFORMACION DEL ENTORNO : ** {{popup>:documentation:cyclops:architecture?[keepOpen]|AEMET: HPC Architecture and Risk Definitions}}

===== Sistemas Objetivo =====

|< 100% 10% 10% 32% 8% 30% >| 
^  Grupo Lustre     ^  Nodos                      ^  Descripción                                                                             ^  Criticidad          ^  Implicación  ^
|  Lustre Gestión   |  nimbus[?]                  | Mantiene la configuración del sistema de Lustre                                          |  @#FA5858: MUY ALTA  |               |
|  Lustre MDS       |  nimbus[?]                  | Mantienen un registro de transacciones de archivos y cambios en el sistema de archivos.  |  @#FAAC58: ALTA      |               |
|  Lustre OSS       |  nimbus[?]                  | Responsables de la interconexión y operaciones con los dispositivos de almacenamiento    |  @#FAAC58: ALTA      |               |
|  Lustre Clientes  |  nimbus[0-5,10-13][0-9]{4}  | Tienen acceso al sistema de archivos                                                     |  @#EAFFD5: BAJA      |               |

===== Sistemas Colaterales =====

|< 100% 10% 10% 32% 8% 30% >| 
^  Grupo         ^  Nodos           ^  Descripción                                                     ^  Criticidad  ^  Implicacion  ^ 
|  Gestión       |  nimbus[0-1]     |  Permiten la administración del servicio                         |  @#EAFFD5: BAJA      |  Los Administradores no pueden acceder directamente a lustre  |
|  Login         |  nimbus[2-3]     |  Acceso de los usuarios al sistema productivo                    |  @#EAFFD5: BAJA      |  Los usuarios no pueden acceder al sistema de ficheros   |
|  IO            |  nimbus[4-5]     |  Transferencia de Información con el entorno de la organización  |  @#FFFF00: MEDIA     |  No se puede realizar transferencia de datos entre AEMET y Nimbus  |
|  Lustre        |  nimbus[6-9]     |  Funcionamiento del servicio                                     |  @#FA5858: MUY ALTA  |  Posibilidad de caída completa del sistema productivo    |
|  Computo/Aire  |  nimbus[10-13]   |  Uso del servicio por el sistema productivo                      |  @#FFFF00: MEDIA     |  Merma en el rendimiento productivo  |
|  Computo/Agua  |  nimbus[0-9]{4}  |  Uso del servicio por el sistema productivo                      |  @#FFFF00: MEDIA     |  Merma en el rendimiento productivo  |

===== Procedimiento =====

==== Notificación Inicial ====


  - Notificar la incidencia:
    * SI SOY: Valencia -> [[:operation:procedures:ADBVXX0001|ADBVXX0001 : Notificación BULL - Valencia ]]
    * SI SOY: AEMET ->    [[:operation:procedures:ADAEXX0002|ADAEXX0002 : AEMET Notificatión ]]
    * SI NO SOY NINGUNO DE LOS ANTERIORES -> [[:operation:procedures:ADBAXX0001| ADBAXX0001 : Notificación BULL - AEMET ]]

==== Alcance ====

  * ** Este procedimiento solo se ejecutara por los siguientes actores en las siguientes circunstancias: **

|< 50% >|
^  ACTOR          ^  EJECUCION                   ^  HORARIO EJECUCION                                                                     ^
|  AEMET          |  @#FA5858:<fc white>NO</fc>  |  @#FAAC58: SOLO NOTIFICACIÓN INICIAL                                                   |
|  BULL VALENCIA  |  @#EAFFD5:SI                 |  @#FFFF00: EXCLUIR HORARIO BULL AEMET  ( L-J 08:00-17:30 y V 08:00-14:00 HORA LOCAL )  |
|  BULL AEMET     |  @#EAFFD5:SI                 |  @#EAFFD5:L-J 08:00-17:30 y V 08:00-14:00 HORA LOCAL                                   |
|  BULL MADRID    |  @#EAFFD5:SI                 |  @#FFFF00: INTERVENCION SOLICITADA                                                     |

==== Ejecución ====
 
  * ** Se ejecutan los siguientes pasos: **

  - Conectarse externamente a un nodo de gestión: [[operation:procedures:SPXXXX0002|SPXXXX0002 : Conexión SSH al Sistema]]
    - En caso de no poder conectarse: [[operation:procedures:SPXXXX0004|SPXXXX0004 : Perdida de Conexión con la monitorización]]
  - Conectarse internamente al nodo afectado: [[operation:procedures:SPXXXX0002|SPXXXX0002 : Conexión SSH al Sistema]]
  - Chequear cabinas: 
    * [[operation:procedures:HRSTBS0001|HRSTBS0001 : Chequear Estado Cabinas de Almacenamiento]]
    - En caso de  estar apagadas : 
      * [[operation:procedures:HRSTBS0002|HRSTBS0002 : Encender una cabina]]
  - Chequear servidores MDS (nimbus6 y nimbus7): [[operation:procedures:SFCYBS0001|SFCYBS0001 : Monitorizar el estado de los Nodos]]
    - En caso de  NO estar encendidos:
      * [[:operation:procedures:HRBLBS0001| HRBLBS0001 : Encender Nodo]]
  - Chequear servidores OSS (nimbus8 y nimbus9): [[operation:procedures:SFCYBS0001|SFCYBS0001 : Monitorizar el estado de los Nodos]]
    - En caso de NO estar encendidos:
      * [[:operation:procedures:HRBLBS0001| HRBLBS0001 : Encender Nodo]]
  - [[operation:procedures:FSLUBS0003 | SFLUBS0003  : Start servicio lustre]]
  - [[operation:procedures:FSLUBS0006 | FSLUBS0006  : Start servidores lustre]]
  - Esperamos a que en todos los nodos el daemon esté "RUNNING". Podemos consultar el estado del proceso con "hashine statusd"
  - [[operation:procedures:FSLUBS0007 | FSLUBS0007  : Iniciar Filesystem con HA]]
  - [[operation:procedures:FSLUBS0005 | FSLUBS0005  : Montar clientes lustre]]

==== Notificación Final ====

  - Notificar la incidencia:
    * SI SOY Valencia -> [[:operation:procedures:ADBVXX0001|ADBVXX0001 : Notificación BULL - Valencia ]]
  - FINAL