====== Problem slurm node ======

===== Datos Generales =====

|< 50% >|
^  Código      ^  Nombre Procedimiento   ^  Verificado   ^  Operativo    ^  Fecha Creación  ^  Fecha Ultima Modificación  ^  Versión  ^
|  SFSLAV0003  |  Problem slurm node  |  @#EAFFD5:SI  |  @#EAFFD5:SI  |  17/09/2015      |  16/08/2016                 |  0.3      |


  * ** <fc red> IMPORTANTE: </fc> INFORMACION DEL ENTORNO : ** {{popup>:documentation:cyclops:architecture?[keepOpen]|AEMET: HPC Architecture and Risk Definitions}}

===== Sistemas Objetivo =====

|< 100% >| 
^  Grupo         ^  Nodos           ^  Descripción                                    ^  Criticidad          ^  Implicación  ^
|  Gestion       |  nimbus[0-1]     |Gestión Sistema Productivo                       |  @#FA5858: MUY ALTA  |Caída del Sistema Productivo  |
|  Login         |  nimbus[2-3]     |Ejecución del Sistema Productivo                 |  @#FA5858: MUY ALTA  |La producción no se ejecuta   |
|  Computo Aire  |  nimbus[10-13]   |Ejecución del Sistema Productivo                 |  @#FAAC58: ALTA      |Merma del Entorno Productivo  |
|  Computo Agua  |  nimbus[0-9]{4}  |Ejecución del Sistema Productivo                 |  @#FAAC58: ALTA      |Merma del Entorno Productivo  |

===== Sistemas Colaterales =====

|< 100% >| 
^  Grupo         ^  Nodos          ^  Descripción                                     ^  Criticidad          ^  Implicación  ^ 
|  Gestion       |  nimbus[0-1]     |Gestión Sistema Productivo                       |  @#FA5858: MUY ALTA  |Caída del Sistema Productivo  |
|  Login         |  nimbus[2-3]     |Ejecución del Sistema Productivo                 |  @#FA5858: MUY ALTA  |La producción no se ejecuta   |
|  Computo Aire  |  nimbus[10-13]   |Ejecución del Sistema Productivo                 |  @#FAAC58: ALTA      |Merma del Entorno Productivo  |
|  Computo Agua  |  nimbus[0-9]{4}  |Ejecución del Sistema Productivo                 |  @#FAAC58: ALTA      |Merma del Entorno Productivo  |

===== Procedimiento =====

==== Notificación Inicial ====


  - Notificar la incidencia:
    * SI SOY: Valencia -> [[:operation:procedures:ADBVXX0001|ADBVXX0001 : Notificación BULL - Valencia ]]
    * SI SOY: AEMET ->    [[:operation:procedures:ADAEXX0002|ADAEXX0002 : AEMET Notificatión ]]
    * SI NO SOY NINGUNO DE LOS ANTERIORES -> [[:operation:procedures:ADBAXX0001| ADBAXX0001 : Notificación BULL - AEMET ]]

==== Alcance ====

  * ** Este procedimiento solo se ejecutara por los siguientes actores en las siguientes circunstancias: **

|< 50% >|
^  ACTOR          ^  EJECUCION  ^  HORARIO EJECUCION           ^ 
|  AEMET          |     @#FA5858: NO      |     NINGUNO                  |
|  BULL VALENCIA  |     SI      |  @#FFFF00: EXCLUIR HORARIO BULL AEMET  ( L-J 08:00-17:30 y V 08:00-14:00 HORA LOCAL )  |
|  BULL AEMET     |     SI      |  HORARIO ( L-J 08:00-17:30 y V 08:00-14:00 HORA LOCAL )  |
|  BULL MADRID    |     SI      |  @#FFFF00: INTERVENCION SOLICITADA  |   

==== Ejecución ====

  - Conectarse externamente a un nodo de gestion: [[operation:procedures:SPXXXX0002|SPXXXX0002 : Conexión SSH al Sistema]]
    - En caso de no poder conectarse: [[operation:procedures:SPXXXX0004|SPXXXX0004 : Perdida de Conexión con la monitorización]]
  - Conectarse internamente al nodo afectado: [[operation:procedures:SPXXXX0002|SPXXXX0002 : Conexión SSH al Sistema]]
  - Comprobamos el estado que indica el sensor:[[operation:procedures:SFSLBS0006|SFSLBS0006 : Chequear el estado de un nodo dentro de slurm]]
  - Segun el estado en el que se encuentre el nodo:
    * ** drain/mantenimiento **: realizar las siguientes acciones:
      - Conectarse al nodo afectado -> [[operation:procedures:SPXXXX0002|SPXXXX0002 : Conexión SSH al Sistema]]
      - Cambiar el estado del nodo a ** idle ** -> [[operation:procedures:SFSLBS0004|SFSLBS0004 : Estado de un nodo en Slurm]]
    * ** [ resto de estados ] **: realizar las siguientes acciones:
      - Poner el nodo en contención -> [[operation:procedures:HRBLAV0003|HRBLAV0003 : Contención de un nodo]]
 
==== Notificación Final ====

  - Notificar la incidencia:
    * SI SOY Valencia -> [[:operation:procedures:ADBVXX0001|ADBVXX0001 : Notificación BULL - Valencia ]]
  - FINAL
